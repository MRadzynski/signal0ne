---
name: ErrorRateByService
lookback: 15m
trigger:
  webhook:
    output:
      service: "job"
      span: "span_name"
      timestamp: "startsAt"
steps:
- name: Get ownership
  integration: backstage_lab01
  function: get_properties_values
  input:
    filter: kind=component,metadata.name={{.service}}
  output:
    owner: "spec.owner"
    slack_channel: "metadata.labels.slack_channel"
- name: Send to slack channel
  integration: slack_lab01
  function: post_message
  input:
    parsable_context_object: "{{index}}"
    ignore_context_keys: "backstage1.get_properties_values.output[].slack_channel"
    